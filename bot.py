"""
Telegram Bot for Sinich
Hosted on Bothost.org
"""

import logging
from telegram import Update
from telegram.ext import Application, CommandHandler, MessageHandler, filters, ContextTypes

# ============================================
# –ù–ê–°–¢–†–û–ô–ö–ê –õ–û–ì–ì–ò–†–û–í–ê–ù–ò–Ø
# ============================================
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)
logger = logging.getLogger(__name__)

# ============================================
# –ö–û–ú–ê–ù–î–´ –ë–û–¢–ê
# ============================================

async def start_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start"""
    user = update.effective_user
    welcome_text = f"""
üéÆ –ü—Ä–∏–≤–µ—Ç, {user.first_name}! –Ø —Ç–≤–æ–π –∏–≥—Ä–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫!

‚ú® –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
/start - —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ
/hello - –ø–æ–∑–¥–æ—Ä–æ–≤–∞—Ç—å—Å—è
/help - –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã
/games - –∏–≥—Ä–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
/shopping - —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫ (—Å–∫–æ—Ä–æ)
/remind - –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ (—Å–∫–æ—Ä–æ)

üìå –ü–∏—à–∏ –º–Ω–µ —á—Ç–æ —É–≥–æ–¥–Ω–æ, –∏ —è –æ—Ç–≤–µ—á—É!
    """
    await update.message.reply_text(welcome_text)

async def hello_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /hello"""
    responses = [
        "–ü—Ä–∏–≤–µ—Ç, –ü–æ–ª–∏–∫! –ì–æ –∏–≥—Ä–∞—Ç—å? üéÆ",
        "–ó–¥–∞—Ä–æ–≤–∞, –¥—Ä—É–≥! –ö–∞–∫ –¥–µ–ª–∏—à–∫–∏? üòé",
        "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é! –ß–µ–º –∑–∞–π–º–µ–º—Å—è —Å–µ–≥–æ–¥–Ω—è? ‚ú®",
        "–ô–æ—É! –†–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å! üéØ",
        "–ü—Ä–∏–≤–µ—Ç! –ì–æ—Ç–æ–≤ –∫ –Ω–æ–≤—ã–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º? üèÜ"
    ]
    import random
    await update.message.reply_text(random.choice(responses))

async def help_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help"""
    help_text = """
ü§ñ **–ö–û–ú–ê–ù–î–´ –ë–û–¢–ê:**

üéÆ **–û—Å–Ω–æ–≤–Ω—ã–µ:**
/start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É
/hello - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
/help - –≠—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞
/info - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ

üéØ **–ò–≥—Ä–æ–≤—ã–µ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ):**
/games - –ò–≥—Ä–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
/tracker - –¢—Ä–µ–∫–µ—Ä –∏–≥—Ä–æ–≤–æ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
/events - –ò–≥—Ä–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è

üõí **–ë—ã—Ç–æ–≤—ã–µ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ):**
/shopping - –°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫
/todo - –°–ø–∏—Å–æ–∫ –¥–µ–ª
/remind - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

üí¨ **–ü—Ä–æ—á–µ–µ:**
–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ - –∏ —è –æ—Ç–≤–µ—á—É!
    """
    await update.message.reply_text(help_text)

async def info_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /info"""
    info_text = """
üìä **–ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –ë–û–¢–ï:**
‚Ä¢ –•–æ—Å—Ç–∏–Ω–≥: Bothost.org üöÄ
‚Ä¢ –°—Ç–∞—Ç—É—Å: –†–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
‚Ä¢ –í–ª–∞–¥–µ–ª–µ—Ü: Sinich (–ü–æ–ª–∏–∫) üéÆ
‚Ä¢ –í–µ—Ä—Å–∏—è: 1.0
‚Ä¢ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –≥–µ–π–º–µ—Ä–∞ –∏ –±—ã—Ç–∞

‚öôÔ∏è **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
‚Ä¢ –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: python-telegram-bot
‚Ä¢ –Ø–∑—ã–∫: Python 3
‚Ä¢ –¢–æ–∫–µ–Ω: –ë–µ–∑–æ–ø–∞—Å–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–∞ Bothost
    """
    await update.message.reply_text(info_text)

async def games_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /games"""
    games_text = """
üéÆ **–ò–ì–†–û–í–´–ï –§–£–ù–ö–¶–ò–ò (–°–ö–û–†–û):**

1. **–¢—Ä–µ–∫–µ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:**
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —É—Ä–æ–≤–Ω–µ–π
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–≤–µ—Å—Ç–æ–≤
   - –ò–≥—Ä–æ–≤—ã–µ —Ü–µ–ª–∏

2. **–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è:**
   - –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–≥—Ä —Å –¥—Ä—É–∑—å—è–º–∏
   - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –∏–≤–µ–Ω—Ç–∞—Ö
   - –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–π–¥–æ–≤

3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
   - –í—Ä–µ–º—è –≤ –∏–≥—Ä–∞—Ö
   - –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
   - –ö–æ–ª–ª–µ–∫—Ü–∏–∏

‚ú® –§—É–Ω–∫—Ü–∏–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ - —Å–ª–µ–¥–∏ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏!
    """
    await update.message.reply_text(games_text)

async def echo_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ–±—ã—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
    user_message = update.message.text
    
    # –ü—Ä–æ—Å—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ—Ä–∞–∑—ã
    responses = {
        "–ø—Ä–∏–≤–µ—Ç": "–ò —Ç–µ–±–µ –ø—Ä–∏–≤–µ—Ç! üòä",
        "–∫–∞–∫ –¥–µ–ª–∞": "–û—Ç–ª–∏—á–Ω–æ! –ì–æ—Ç–æ–≤ –ø–æ–º–æ–≥–∞—Ç—å —Å –∏–≥—Ä–∞–º–∏ –∏ –¥–µ–ª–∞–º–∏! üéÆ",
        "—á—Ç–æ –¥–µ–ª–∞–µ—à—å": "–ñ–¥—É —Ç–≤–æ–∏—Ö –∫–æ–º–∞–Ω–¥! –ü–∏—à–∏ /help –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥",
        "—Å–ø–∞—Å–∏–±–æ": "–í—Å–µ–≥–¥–∞ —Ä–∞–¥ –ø–æ–º–æ—á—å! üëç",
        "–ø–æ–∫–∞": "–î–æ –≤—Å—Ç—Ä–µ—á–∏! –ù–µ –∑–∞–±—ã–≤–∞–π –ø—Ä–æ –≥–∏–ª—å–¥–µ–π—Å–∫–∏–π —Ä–µ–π–¥! üëã"
    }
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –≥–æ—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç
    lower_message = user_message.lower()
    for key in responses:
        if key in lower_message:
            await update.message.reply_text(responses[key])
            return
    
    # –ï—Å–ª–∏ –Ω–µ—Ç –≥–æ—Ç–æ–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ - –ø—Ä–æ—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä—è–µ–º
    reply_text = f"–í—ã –Ω–∞–ø–∏—Å–∞–ª–∏: \"{user_message}\"\n\n"
    reply_text += "–ü–æ–∫–∞ —è —Ç–æ–ª—å–∫–æ —É—á—É—Å—å! –ò—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–∞–Ω–¥—ã –∏–∑ /help"
    await update.message.reply_text(reply_text)

# ============================================
# –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò –ó–ê–ü–£–°–ö
# ============================================

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–æ—Ç–∞"""
    
    logger.info("=" * 50)
    logger.info("–ó–ê–ü–£–°–ö –¢–ï–õ–ï–ì–†–ê–ú –ë–û–¢–ê –î–õ–Ø SINICH")
    logger.info("=" * 50)
    
    try:
        # Bothost –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–∫–µ–Ω –≤ {{token}}
        # –ù–ï –∑–∞–º–µ–Ω—è–π—Ç–µ {{token}} –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω!
        app = Application.builder().token("{{token}}").build()
        
        # –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
        app.add_handler(CommandHandler("start", start_command))
        app.add_handler(CommandHandler("hello", hello_command))
        app.add_handler(CommandHandler("help", help_command))
        app.add_handler(CommandHandler("info", info_command))
        app.add_handler(CommandHandler("games", games_command))
        
        # –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
        app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, echo_message))
        
        logger.info("‚úÖ –ë–æ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ!")
        logger.info("‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –¥–æ–±–∞–≤–ª–µ–Ω—ã")
        logger.info("=" * 50)
        
        return app
        
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–æ—Ç–∞: {e}")
        raise

# ============================================
# –¢–û–ß–ö–ê –í–•–û–î–ê
# ============================================
if __name__ == "__main__":
    """
    –≠—Ç–æ—Ç –±–ª–æ–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–º –∑–∞–ø—É—Å–∫–µ.
    –ù–∞ Bothost —Ñ—É–Ω–∫—Ü–∏—è main() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
    """
    print("=" * 50)
    print("‚ö†Ô∏è  –≠—Ç–æ—Ç –∫–æ–¥ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è Bothost!")
    print("=" * 50)
    print("–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:")
    print("1. –ó–∞–º–µ–Ω–∏—Ç–µ '{{token}}' –Ω–∞ –≤–∞—à —Ç–æ–∫–µ–Ω")
    print("2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: python bot.py")
    print("=" * 50)
    
    # –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏):
    # app = Application.builder().token("–í–ê–®_–¢–û–ö–ï–ù_–ó–î–ï–°–¨").build()
    # app.add_handler(CommandHandler("start", start_command))
    # app.add_handler(CommandHandler("hello", hello_command))
    # app.run_polling()